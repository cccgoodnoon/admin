(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13154576"],{"0c8a":function(e,t,i){"use strict";var n=i("f233"),s=i.n(n);s.a},"61c7":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("div",{staticClass:"chartLineBox",staticStyle:{height:"50px"}}),e._v(" "),i("el-main",[i("div",{attrs:{id:"user"}},[i("h2",[e._v("上传文件一览")]),e._v(" "),i("el-row",{staticClass:"line-display"},[i("el-col",{attrs:{span:22,offset:1}},[i("div",{staticClass:"grid-content",staticStyle:{"margin-top":"0px",border:"0"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/api/u/fdb/task","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.upFile,"on-error":e.uploadFalse,multiple:"",limit:3,"auto-upload":!1,"on-exceed":e.handleExceed,"before-upload":e.beforeUpload}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器\n                  ")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("最多上传3个文件，且文件大小不超过10MB")])],1)],1)],1),e._v(" "),i("el-row",[i("div",{staticClass:"searchWord"},[i("el-input",{staticStyle:{display:"inline-block",width:"300px"},attrs:{placeholder:"输入搜索文件名称"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]),e._v(" "),i("el-button",{attrs:{type:"success",size:"small"},on:{click:e.multiDownload}},[e._v("批量下载")]),e._v(" "),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.multiDelete}},[e._v("批量删除")]),e._v(" "),i("el-col",{staticStyle:{height:"20px"},attrs:{span:24}}),e._v(" "),i("el-table",{ref:"test",staticStyle:{width:"100%"},attrs:{data:e.tables,height:"550",stripe:""}},[i("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"uuid",label:"uuid",sortable:"",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"curname",label:"文件名称",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"originname",label:"文件原名",sortable:"",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"upddate",label:"更新时间",sortable:"",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"crtdate",label:"创建时间",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"success",size:"small"},on:{click:function(i){return e.downloadNode(t.$index,t.row)}}},[e._v("下载")]),e._v(" "),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(i){return e.removeNode(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])],1)],1)])],1)},s=[],a=(i("7f7f"),i("ac6a"),i("456d"),i("386d"),i("2f62"),i("5f87")),o=(i("a0bc"),function(e){var t=document.createElement("iframe");t.style.display="none",t.style.height=0,t.src=e,document.body.appendChild(t),setTimeout((function(){t.remove()}),3e5)}),l={name:"",data:function(){return{activities:[],search:"",filelist:[],filter:{per_page:10,page:1,id:"",description:"",endtime:"",performer:"",state:"",title:"",sorts:""},selected:[]}},mounted:function(){this.getActivities()},computed:{tables:function(){var e=this.search;return e?this.activities.filter((function(t){return Object.keys(t).some((function(i){return String(t[i]).toLowerCase().indexOf(e)>-1}))})):this.activities}},methods:{multiDelete:function(){var e=this,t=function(t){var i=e.tables[t].uuid,n=e.tables[t].curname;a["a"]._removeNode(i).then((function(t){e.$message.success("成功删除了该文件"+n+" !"),e.getActivities()})).catch((function(t){e.getActivities()}))};for(var i in this.$refs.test.selection)t(i)},multiDownload:function(){for(var e in this.$refs.test.selection){var t=this.tables[e].uuid;this.tables[e].curname;o("http://127.0.0.1:5000/api/u/fdb/task/"+t)}},tableSelectionChange:function(e){this.selected=e},pageSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.filter.per_page=e,this.getActivities()},pageCurrentChange:function(e){console.log("当前页: ".concat(e)),this.filter.page=e,this.getActivities()},rowClick:function(e,t){var i=$.inArray(e,this.selected);i<0?(this.selected.push(e),this.$refs.usersTable.toggleRowSelection(e,!0)):(this.selected.splice(i,1),this.$refs.usersTable.toggleRowSelection(e,!1))},getActivities:function(){var e=this;a["a"]._getNode().then((function(t){e.activities=t}),(function(e){console.log(e)}))},removeNode:function(e,t){var i=this;this.$confirm("是否要删除"+t.curname+" ?","提示",{type:"warning"}).then((function(){a["a"]._removeNode(t.uuid).then((function(e){i.$message.success("成功删除了该文件"+t.curname+" !"),i.getActivities()})).catch((function(e){i.getActivities()}))}))},submitUpload:function(){this.$refs.upload.submit(),this.getActivities()},uploadFalse:function(e,t,i){console.log(e),this.$message.error(e.message)},downloadNode:function(e,t){var i="http://47.111.234.116:8080/api/u/fdb/task/"+t.uuid;window.location.href=i,console.log(t,1111)},upFile:function(e,t,i){console.log(e);var n=this;201==e.status&&(n.$message.success("上传成功"),n.getActivities())},handleCurrentChange:function(e){this.currpage=e},handleSizeChange:function(e){this.pagesize=e},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},beforeUpload:function(e){e.name.substring(e.name.lastIndexOf(".")+1);var t=e.size/1024/1024<100;return t||this.$message({message:"上传文件大小不能超过 10MB!",type:"warning"}),t}}},c=l,r=(i("0c8a"),i("2877"));i.d(t,"downloadFile",(function(){return o}));var u=Object(r["a"])(c,n,s,!1,null,null,null);t["default"]=u.exports},a0bc:function(e,t,i){"use strict";var n=i("96eb"),s=i.n(n);s.a.mock({"items|10":[{id:"@id",title:"@sentence(10, 20)","status|1":["unfinished","finished"],performer:"name",begintime:"@datetime",endtime:"@datetime",pageviews:"@integer(300, 5000)"}]})},f233:function(e,t,i){}}]);